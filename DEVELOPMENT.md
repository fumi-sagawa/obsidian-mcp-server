# é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Obsidian MCP Serverã®é–‹ç™ºã«å¿…è¦ãªæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚

## ç›®æ¬¡

1. [é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [é–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ](#é–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ)
4. [ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„](#ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„)
5. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
6. [ãƒ‡ãƒãƒƒã‚°æ–¹æ³•](#ãƒ‡ãƒãƒƒã‚°æ–¹æ³•)
7. [æ–°æ©Ÿèƒ½ã®è¿½åŠ ](#æ–°æ©Ÿèƒ½ã®è¿½åŠ )
8. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†)

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ

- Node.js 16ä»¥ä¸Š
- npm 7ä»¥ä¸Š
- TypeScript 5ä»¥ä¸Š
- Git

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/yourusername/obsidian-mcp-server.git
cd obsidian-mcp-server

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ“ãƒ«ãƒ‰
npm run build

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
npm run dev
```

### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

#### å¿…é ˆè¨­å®š

```bash
# Obsidianã®Local REST APIãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‹ã‚‰å–å¾—ã—ãŸAPIã‚­ãƒ¼
export OBSIDIAN_API_KEY="your-api-key-here"
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š

```bash
# Obsidian APIã®URLï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: http://127.0.0.1:27123ï¼‰
export OBSIDIAN_API_URL="http://127.0.0.1:27123"

# HTTPSã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã®è¨¼æ˜æ›¸ãƒ‘ã‚¹
export OBSIDIAN_HTTPS_CERT="/path/to/cert.pem"

# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆtrace, debug, info, warn, errorï¼‰
export LOG_LEVEL="info"

# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šï¼ˆãƒŸãƒªç§’ï¼‰
export API_TIMEOUT="30000"

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
export DEBUG_MODE="false"

# èª­ã¿ã‚„ã™ã„ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
export PRETTY_LOGS="false"

# ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
export LOG_TIMESTAMPS="true"

# ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªã®é–¾å€¤ï¼ˆãƒŸãƒªç§’ï¼‰
export SLOW_OPERATION_THRESHOLD="1000"
```

#### .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ

```bash
# .env.exampleã‚’ã‚³ãƒ”ãƒ¼
cp .env.example .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
nano .env  # ã¾ãŸã¯ä»»æ„ã®ã‚¨ãƒ‡ã‚£ã‚¿ã§ç·¨é›†
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ï¼š
```
OBSIDIAN_API_KEY=your-actual-api-key
OBSIDIAN_API_URL=http://127.0.0.1:27123
LOG_LEVEL=debug
PRETTY_LOGS=true
```

### é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ­ã‚°ãƒ¬ãƒ™ãƒ«: debugï¼‰
npm run dev

# ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¨ãƒ­ã‚°å‡ºåŠ›ï¼‰
npm run dev:trace

# MCP Inspector ã§ã®å®Ÿè¡Œ
OBSIDIAN_API_KEY=your-api-key npm run inspector

# MCP Inspectorï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼‰
OBSIDIAN_API_KEY=your-api-key npm run inspector:debug

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦é–‹ç™ºãƒ¢ãƒ¼ãƒ‰å®Ÿè¡Œ
OBSIDIAN_API_KEY=your-api-key npm run dev

# å…¨ã¦ã®ãƒ­ã‚°ã‚’å‡ºåŠ›ï¼ˆãƒˆãƒ¬ãƒ¼ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼‰
OBSIDIAN_API_KEY=your-api-key LOG_LEVEL=trace npm run dev
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### Feature-Sliced Design (FSD)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ä¿å®ˆå¯èƒ½ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãŸã‚ã«[Feature-Sliced Design](https://feature-sliced.design/)ã®åŸå‰‡ã«å¾“ã£ã¦ã„ã¾ã™ã€‚

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ app/              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”œâ”€â”€ features/         # æ©Ÿèƒ½å±¤ï¼ˆå„æ©Ÿèƒ½ã¯ç‹¬ç«‹ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
â”œâ”€â”€ entities/         # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å±¤ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼‰
â”œâ”€â”€ shared/           # å…±æœ‰å±¤ï¼ˆå…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€APIï¼‰
â””â”€â”€ index.ts          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
```

#### å„å±¤ã®è²¬å‹™

1. **`app/`** - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
   - MCPã‚µãƒ¼ãƒãƒ¼ã®åˆæœŸåŒ–ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   - å…¨MCPãƒ„ãƒ¼ãƒ«ã®ç™»éŒ²
   - ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

2. **`features/`** - æ©Ÿèƒ½å±¤
   - å„MCPãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ï¼ˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼‰
   - ãƒ„ãƒ¼ãƒ«å›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†
   - å…¥åŠ›å€¤ã®æ¤œè¨¼ã‚¹ã‚­ãƒ¼ãƒï¼ˆZodï¼‰
   - ãƒ„ãƒ¼ãƒ«å›ºæœ‰ã®å‹å®šç¾©

3. **`entities/`** - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å±¤
   - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®å‹å®šç¾©
   - ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®å®šæ•°ã‚„åˆ—æŒ™å‹

4. **`shared/`** - å…±æœ‰å±¤
   - Obsidian REST APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
   - ãƒ­ã‚®ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
   - ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
   - è¨­å®šç®¡ç†

#### FSDã®åŸå‰‡

1. **åˆ†é›¢**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹
2. **æ˜ç¤ºçš„ãªä¾å­˜é–¢ä¿‚**: ä¸‹ä½å±¤ã‹ã‚‰ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆ`app` â†’ `features` â†’ `entities` â†’ `shared`ï¼‰
3. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯`index.ts`ã§æ˜ç¢ºãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©

## é–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ğŸš¨ é‡è¦ãªé–‹ç™ºåŸå‰‡

**ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¯ã€æ—¢å­˜ã®Obsidian Local REST APIã®æ©Ÿèƒ½ã‚’MCPãƒ„ãƒ¼ãƒ«ã¨ã—ã¦å¿ å®Ÿã«ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ã™ã€‚**

- ç‹¬è‡ªã®æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã®ã§ã¯ãªãã€APIã®ä»•æ§˜ã«å¾“ã£ãŸå®Ÿè£…ã‚’è¡Œã†
- æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã™ã‚‹å‰ã«ã€å¿…ãš `/project/å‚è€ƒæ–‡çŒ®/openapi.yaml` ã‚’ç¢ºèª
- ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã®è¦ä»¶ãŒAPIä»•æ§˜ã¨ç•°ãªã‚‹å ´åˆã¯ã€APIä»•æ§˜ã‚’å„ªå…ˆ

### å‹å®šç¾©é§†å‹•TDD

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯å‹å®šç¾©é§†å‹•ã®ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆType-Driven TDDï¼‰ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

#### é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. **APIä»•æ§˜ã®ç¢ºèª** - OpenAPIä»•æ§˜æ›¸ã§å®Ÿè£…å¯¾è±¡ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¢ºèª
2. **å‹å®šç¾©ã®ä½œæˆ** - ä»•æ§˜æ›¸ã‹ã‚‰æ­£ç¢ºãªå‹å®šç¾©ã‚’ä½œæˆ
3. **ãƒ†ã‚¹ãƒˆã®ä½œæˆ** - å‹å®šç¾©ã«åŸºã¥ã„ã¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ
4. **å®Ÿè£…** - ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«å‹å®‰å…¨ãªå®Ÿè£…
5. **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°** - å‹ã¨ãƒ†ã‚¹ãƒˆã‚’ç¶­æŒã—ãªãŒã‚‰ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„

#### å®Ÿè·µä¾‹

```typescript
// 1. å‹å®šç¾©ã‚’ä½œæˆ (types.ts)
export interface GetServerStatusResponse {
  status: 'connected' | 'disconnected';
  version: string;
  vaultName: string;
}

// 2. å‹ã«åŸºã¥ã„ã¦ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
describe('get_server_status', () => {
  it('æ­£å¸¸ã«ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ã‚’å–å¾—ã§ãã‚‹', async () => {
    const mockResponse: GetServerStatusResponse = {
      status: 'connected',
      version: '1.0.0',
      vaultName: 'MyVault'
    };
    
    const result = await handler({});
    expect(result).toMatchObject(mockResponse);
  });
});

// 3. ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«å®Ÿè£…
```

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### è¨€èªè¨­å®š

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã¯**æ—¥æœ¬èª**ã‚’ä½¿ç”¨
- ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¥æœ¬èªã§è¨˜è¿°

### TypeScript

- å³å¯†ãªå‹ä»˜ã‘ã‚’ä½¿ç”¨
- ES modulesã‚’ä½¿ç”¨ï¼ˆç›¸å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã¯`.js`æ‹¡å¼µå­ã‚’è¿½åŠ ï¼‰
- Zodã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ã‚’æ´»ç”¨
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯å„å±¤ã§é©åˆ‡ã«è¡Œã†

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

å„æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®æ§‹é€ ã§å®Ÿè£…ï¼š

```
features/get-file/
â”œâ”€â”€ index.ts                 # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç®¡ç†
â”œâ”€â”€ get-file-handler.ts      # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
â”œâ”€â”€ schema.ts                # Zodã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ types.ts                 # TypeScriptå‹å®šç¾©
â””â”€â”€ tests/
    â””â”€â”€ get-file-handler.test.ts
```

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«

1. **Unit Test** - å€‹åˆ¥ã®é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ
   - ãƒ•ã‚¡ã‚¤ãƒ«: `src/**/*.test.ts`
   - å®Ÿè¡Œ: `npm test`

2. **Integration Test** - MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«çµŒç”±ã®çµ±åˆãƒ†ã‚¹ãƒˆ
   - ãƒ•ã‚¡ã‚¤ãƒ«: `test/tools/*/integration.js`
   - å®Ÿè¡Œ: `npm run test:tools`

3. **Mock Test** - ãƒ¢ãƒƒã‚¯APIã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆ
   - ãƒ•ã‚¡ã‚¤ãƒ«: `test/tools/*/mock.js`
   - å®Ÿè¡Œ: `npm run test:tools:mock`

### ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

```bash
# å˜ä½“ãƒ†ã‚¹ãƒˆ
npm test                   # å…¨ãƒ†ã‚¹ãƒˆã‚’ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§å®Ÿè¡Œ
npm run test:unit          # ã‚«ãƒãƒ¬ãƒƒã‚¸ãªã—ã§é«˜é€Ÿå®Ÿè¡Œ
npm run test:watch         # ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–ã—ã¦è‡ªå‹•å®Ÿè¡Œ

# çµ±åˆãƒ†ã‚¹ãƒˆ
npm run test:tools         # å…¨ãƒ„ãƒ¼ãƒ«ã®ãƒ¢ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆå®‰å…¨ï¼‰
npm run test:tools:dangerous  # å…¨ãƒ„ãƒ¼ãƒ«ã®å®ŸAPIãƒ†ã‚¹ãƒˆï¼ˆå±é™ºï¼‰
npm run test:tool          # å˜ä¸€ãƒ„ãƒ¼ãƒ«ã®å¯¾è©±å¼ãƒ†ã‚¹ãƒˆ

# å˜ä¸€ãƒ„ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
./test/test-single.sh get-server-status '{}'
./test/test-single.sh mock get-file '{"filename":"test.md"}'
```

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼ˆMCP Inspectorï¼‰

1. **MCP Inspectorã®èµ·å‹•**
   ```bash
   OBSIDIAN_API_KEY=your-api-key npm run inspector
   ```

2. **ãƒ„ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ**
   - å·¦å´ã®ãƒ„ãƒ¼ãƒ«ä¸€è¦§ã‹ã‚‰å®Ÿè¡Œã—ãŸã„ãƒ„ãƒ¼ãƒ«ã‚’é¸æŠ
   - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥åŠ›
   - ã€ŒExecuteã€ã‚’ã‚¯ãƒªãƒƒã‚¯

3. **ã‚ˆãä½¿ã†ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**
   ```json
   // ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
   {
     "tool": "get_server_status",
     "arguments": {}
   }

   // ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
   {
     "tool": "get_file",
     "arguments": {
       "filename": "test.md"
     }
   }

   // ãƒãƒ¼ãƒˆæ¤œç´¢
   {
     "tool": "simple_search",
     "arguments": {
       "query": "æ¤œç´¢èª"
     }
   }
   ```

## ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

### ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’æœ‰åŠ¹ã«ã—ã¦å®Ÿè¡Œ
LOG_LEVEL=debug npm run dev

# å…¨ã¦ã®ãƒ­ã‚°ã‚’å‡ºåŠ›
LOG_LEVEL=trace npm run dev:trace

# èª­ã¿ã‚„ã™ã„ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
PRETTY_LOGS=true npm run dev

# MCP Inspector ã§ãƒ‡ãƒãƒƒã‚°
npm run inspector:debug
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# ãƒãƒ¼ãƒˆã®ç¢ºèª
lsof -i :27123

# APIã‚­ãƒ¼ã®ç¢ºèª
echo $OBSIDIAN_API_KEY

# æ‰‹å‹•ã§APIã‚’ãƒ†ã‚¹ãƒˆ
curl -H "Authorization: Bearer $OBSIDIAN_API_KEY" http://127.0.0.1:27123/
```

#### å‹ã‚¨ãƒ©ãƒ¼

```bash
# TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯
npm run typecheck

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å‹ãƒã‚§ãƒƒã‚¯
npx tsc --noEmit src/features/get-file/get-file-handler.ts
```

## æ–°æ©Ÿèƒ½ã®è¿½åŠ 

### 1. APIä»•æ§˜ã®ç¢ºèª

```bash
# OpenAPIä»•æ§˜æ›¸ã‚’ç¢ºèª
cat project/å‚è€ƒæ–‡çŒ®/openapi.yaml | grep -A 20 "æ–°ã—ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ"
```

### 2. æ©Ÿèƒ½ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ

```bash
# æ–°æ©Ÿèƒ½ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
mkdir -p src/features/new-feature/{tests}
```

### 3. å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

- `types.ts` - å‹å®šç¾©
- `schema.ts` - Zodã‚¹ã‚­ãƒ¼ãƒ
- `new-feature-handler.ts` - ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
- `tests/new-feature-handler.test.ts` - ãƒ†ã‚¹ãƒˆ
- `index.ts` - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### 4. ãƒ†ã‚¹ãƒˆã®ä½œæˆã¨å®Ÿè£…

```bash
# ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
npm run test:watch -- new-feature

# çµ±åˆãƒ†ã‚¹ãƒˆã®è¿½åŠ 
mkdir -p test/tools/new-feature
# integration.js ã¨ mock.js ã‚’ä½œæˆ
```

### 5. ãƒ„ãƒ¼ãƒ«ã®ç™»éŒ²

`src/app/index.ts` ã§ãƒ„ãƒ¼ãƒ«ã‚’ç™»éŒ²ï¼š

```typescript
server.setRequestHandler(ListToolsRequestSchema, async () => ({
  tools: [
    // ... æ—¢å­˜ã®ãƒ„ãƒ¼ãƒ«
    {
      name: "new_feature",
      description: "æ–°æ©Ÿèƒ½ã®èª¬æ˜",
      inputSchema: zodToJsonSchema(NewFeatureArgsSchema)
    }
  ]
}));
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†

### ã‚¿ã‚¹ã‚¯ç®¡ç†

```
project/tasks/
â”œâ”€â”€ todo/     # æœªç€æ‰‹ã®ã‚¿ã‚¹ã‚¯
â”œâ”€â”€ doing/    # ä½œæ¥­ä¸­ã®ã‚¿ã‚¹ã‚¯
â””â”€â”€ done/     # å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯
```

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

- `main` - å®‰å®šç‰ˆ
- `develop` - é–‹ç™ºç‰ˆ
- `feature/*` - æ–°æ©Ÿèƒ½
- `fix/*` - ãƒã‚°ä¿®æ­£

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

```
feat: æ–°æ©Ÿèƒ½ã®è¿½åŠ 
fix: ãƒã‚°ã®ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°
refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
test: ãƒ†ã‚¹ãƒˆã®è¿½åŠ ãƒ»ä¿®æ­£
chore: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ã®å¤‰æ›´
```

## åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«

å®Ÿè£…æ¸ˆã¿ã®ãƒ„ãƒ¼ãƒ«ä¸€è¦§ã¯ã€`src/features/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚å„ãƒ„ãƒ¼ãƒ«ã®è©³ç´°ãªä»•æ§˜ã¯ `/project/å‚è€ƒæ–‡çŒ®/openapi.yaml` ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ä¸»è¦ãªãƒ„ãƒ¼ãƒ«

- **ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ**: get_file, create_or_update_file, delete_file, append_to_file
- **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«**: get_active_file, update_active_file, append_to_active_file
- **æ¤œç´¢**: simple_search, search_notes
- **ã‚³ãƒãƒ³ãƒ‰**: list_commands, execute_command
- **å®šæœŸãƒãƒ¼ãƒˆ**: get_periodic_note, update_periodic_note, delete_periodic_note
- **ãã®ä»–**: get_server_status, list_vault_files, list_directory, open_file